{"version":3,"sources":["track.ts"],"names":["event","settings","anonId","anonymousId","length","Adjust","addSessionPartnerParameter","token","adjEvent","AdjustEvent","properties","Object","entries","forEach","key","value","addCallbackParameter","revenue","currency","orderId","setRevenue","setTransactionId","trackEvent"],"mappings":";;;;;;;AAAA;;AAKA;;eAEe,CAACA,KAAD,EAAwBC,QAAxB,KAA4D;AACzE,QAAMC,MAAM,GAAGF,KAAK,CAACG,WAArB;;AACA,MAAID,MAAM,IAAIA,MAAM,CAACE,MAAP,GAAgB,CAA9B,EAAiC;AAC/BC,8BAAOC,0BAAP,CAAkC,cAAlC,EAAkDJ,MAAlD;AACD;;AAED,QAAMK,KAAK,GAAG,kCAAuBP,KAAK,CAACA,KAA7B,EAAoCC,QAApC,CAAd;;AACA,MAAIM,KAAJ,EAAW;AACT,UAAMC,QAAQ,GAAG,IAAIC,8BAAJ,CAAgBF,KAAhB,CAAjB;AAEA,UAAMG,UAAU,GAAGV,KAAK,CAACU,UAAzB;;AACA,QAAIA,UAAJ,EAAgB;AACdC,MAAAA,MAAM,CAACC,OAAP,CAAeF,UAAf,EAA2BG,OAA3B,CAAmC,QAAkB;AAAA,YAAjB,CAACC,GAAD,EAAMC,KAAN,CAAiB;AACnDP,QAAAA,QAAQ,CAACQ,oBAAT,CAA8BF,GAA9B,EAAmCC,KAAnC;AACD,OAFD;AAIA,YAAME,OAAO,GAAG,mBAAgB,SAAhB,EAA2BP,UAA3B,CAAhB;AACA,YAAMQ,QAAQ,GAAG,mBAAgB,UAAhB,EAA4BR,UAA5B,EAAwC,KAAxC,CAAjB;AACA,YAAMS,OAAO,GAAG,mBAAgB,SAAhB,EAA2BT,UAA3B,CAAhB;;AAEA,UAAIO,OAAO,IAAIC,QAAf,EAAyB;AACvBV,QAAAA,QAAQ,CAACY,UAAT,CAAoBH,OAApB,EAA6BC,QAA7B;AACD;;AAED,UAAIC,OAAJ,EAAa;AACXX,QAAAA,QAAQ,CAACa,gBAAT,CAA0BF,OAA1B;AACD;AACF;;AAEDd,8BAAOiB,UAAP,CAAkBd,QAAlB;AACD;AACF,C","sourcesContent":["import { Adjust, AdjustEvent } from 'react-native-adjust';\nimport type {\n  TrackEventType,\n  SegmentAdjustSettings,\n} from '@segment/analytics-react-native';\nimport { extract, mappedCustomEventToken } from '../util';\n\nexport default (event: TrackEventType, settings: SegmentAdjustSettings) => {\n  const anonId = event.anonymousId;\n  if (anonId && anonId.length > 0) {\n    Adjust.addSessionPartnerParameter('anonymous_id', anonId);\n  }\n\n  const token = mappedCustomEventToken(event.event, settings);\n  if (token) {\n    const adjEvent = new AdjustEvent(token);\n\n    const properties = event.properties;\n    if (properties) {\n      Object.entries(properties).forEach(([key, value]) => {\n        adjEvent.addCallbackParameter(key, value as string);\n      });\n\n      const revenue = extract<number>('revenue', properties);\n      const currency = extract<string>('currency', properties, 'USD');\n      const orderId = extract<string>('orderId', properties);\n\n      if (revenue && currency) {\n        adjEvent.setRevenue(revenue, currency);\n      }\n\n      if (orderId) {\n        adjEvent.setTransactionId(orderId);\n      }\n    }\n\n    Adjust.trackEvent(adjEvent);\n  }\n};\n"]}
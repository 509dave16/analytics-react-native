{"version":3,"sources":["group.ts"],"names":["event","mixpanel","settings","groupId","groupTraits","groupIdentifierTraits","undefined","groupTrait","eventTrait","traits","toLocaleLowerCase","group","getGroup","setOnce","setGroup"],"mappings":"AAIA,gBAAe,CACbA,KADa,EAEbC,QAFa,EAGbC,QAHa,KAIV;AACH,QAAMC,OAAO,GAAGH,KAAK,CAACG,OAAtB;AACA,QAAMC,WAAW,GAAGF,QAAQ,CAACG,qBAA7B;;AAEA,MAAID,WAAW,KAAKE,SAApB,EAA+B;AAC7B,SAAK,IAAIC,UAAT,IAAuBH,WAAvB,EAAoC;AAClC,WAAK,IAAII,UAAT,IAAuBR,KAAK,CAACS,MAA7B,EAAqC;AACnC,YAAIF,UAAU,CAACG,iBAAX,OAAmCF,UAAU,CAACE,iBAAX,EAAvC,EAAuE;AACrE,gBAAMC,KAAK,GAAGX,KAAK,CAACS,MAAN,CAAaF,UAAb,CAAd;AACA,gBAAME,MAAM,GAAGT,KAAK,CAACS,MAArB;AAEAR,UAAAA,QAAQ,CAACW,QAAT,CAAkBD,KAAlB,EAAyBR,OAAzB,EAAkCU,OAAlC,CAA0C,YAA1C,EAAwDJ,MAAxD;AACD;AACF;;AACDR,MAAAA,QAAQ,CAACa,QAAT,CAAkBP,UAAlB,EAA8BJ,OAA9B;AACD;AACF;AACF,CArBD","sourcesContent":["import type { Mixpanel } from 'mixpanel-react-native';\nimport type { GroupEventType } from '@segment/analytics-react-native';\nimport type { SegmentMixpanelSettings } from '../types';\n\nexport default (\n  event: GroupEventType,\n  mixpanel: Mixpanel,\n  settings: SegmentMixpanelSettings\n) => {\n  const groupId = event.groupId;\n  const groupTraits = settings.groupIdentifierTraits;\n\n  if (groupTraits !== undefined) {\n    for (let groupTrait of groupTraits) {\n      for (let eventTrait in event.traits) {\n        if (groupTrait.toLocaleLowerCase() === eventTrait.toLocaleLowerCase()) {\n          const group = event.traits[groupTrait] as string;\n          const traits = event.traits;\n\n          mixpanel.getGroup(group, groupId).setOnce('properties', traits);\n        }\n      }\n      mixpanel.setGroup(groupTrait, groupId);\n    }\n  }\n};\n"]}